# Common Alias defenition file.
# Designed so it can be shared among different computers and shells
#
# Author: David Terei

# enable color support of ls and also add handy aliases
if [ "$TERM" != "dumb" ]; then
	export LSCOLORS="Gxfxcxdxbxegedabagacad"
	if command -v dircolors &>/dev/null; then
		eval "`dircolors -b`" &>/dev/null
	fi
	ls --color -d . &>/dev/null 2>&1 && \
		alias ls='ls --color=auto' || alias ls='ls -G'
fi

# reload profile
alias rlp='source ~/.profile'

# some more ls aliases
alias dir='ls --format=vertical'
alias vdir='ls --format=long'
alias ll='ls -l'
alias la='ls -A'
alias l='ls -CF'

# cd aliases
alias cd..='cd ..'
alias .='pwd'
alias ..='cd ..'
alias ...='cd ../..'
alias ....='cd ../../..'
alias ~='cd ~'
alias -- -='cd -'

# Push and pop directories on directory stack
alias pu='pushd'
alias po='popd'
alias d='dirs -v'

#make,remove dir
alias md='mkdir -p'
alias rd=rmdir
function take() {
  mkdir -p $1
  cd $1
}

# Super user
alias _='sudo'
alias ss='sudo su -'
alias _g='gksu'

# app aliases
alias g='git'
alias m='mutt'
alias v='vim'
alias vi='vim'
alias ds='darcs'

# turn on some good! regular expression by default
alias sed='sed -r'
alias grep='grep -E'

# create alias thats kind of like wget using curl if wget isn't present
if command -v wget &>/dev/null; then
else
	if command -v curl &>/dev/null; then
		function wget() {
			file=`echo $1 | sed -e 's/.*\///'`
			curl -X GET $1 > $file
		}
	fi
fi

# nice function for easy text searching in files
function fsearch() {
	find * -iname "$1" | xargs egrep "$2";
}

function frsearch() {
	find * -regextype posix-extended -regex ".*$1" | xargs egrep "$2";
}

function hsf() {
	find * -regextype posix-extended -regex ".**.(c|h|cmm|l?hs)" |\
	xargs egrep "`echo $1 | sed -e 's/ /\\\s\*/'`" |\
	grep -v "_darcs";
}

function lmf() {
	find * -regextype posix-extended -regex ".**.(c|h|cpp|td|cxx|inc)" |\
	xargs egrep "`echo $1 | sed -e 's/ /\\\s\*/'`" |\
	grep -v "_darcs";
}

alias delay=sleep

# nice pause function (equivalent of DOS pause)
function pause() { read -n1 -r -p "Press any key to continue..." key; }

# display broken sym links
function find_bad_syms() {
	for f in $(find $1 -type l); do
		if [ ! -e "$f" ]; then
			echo "$f";
		fi;
	done;
}

# remove broken sym links
function rm_bad_syms() {
	find $1 -type l |\
		while read f; do
			if [ ! -e "$f" ]; then
				echo "rm $f...";
				rm -f "$f";
			fi;
		done;
}

# Git
alias g='git'
alias gz='git status -s'
alias gd='git diff | less'
alias gl='git pull'
alias gup='git fetch && git rebase'
alias gp='git push'
alias gc='git commit -v'
alias gca='git commit -v -a'
alias gcm='git commit -m'
alias gcma='git commit -a -m'
alias gb='git branch'
alias gcp='git cherry-pick'
alias gg='git log'
alias ggp='git log -p'
alias gcount='git shortlog -sn'
alias ga='git add'
alias gai='git add -i'
alias gsv='git svn'

function gch () {
	git clone "git@github.com:dterei/$1.git"
}	

# Darcs
alias z='darcs'
alias zs='darcs whatsnew -s'
alias zd='darcs whatsnew | less'
alias zl='darcs pull'
alias zla='darcs pull -a'
alias zp='darcs push'
alias zc='darcs record'
alias zz='darcs changes | less'
alias zzv='darcs changes --verbose | less'
alias za='darcs add'
alias ze='darcs send'
alias zg='darcs get'
alias zo='darcs obliterate'

# Ghc
alias dghc='$GHCDEVBIN'
alias dghc1='$GHCDEV/ghc-stage1'
alias dghcc='$GHCDEVBIN -keep-tmp-files -fllvm -fforce-recomp -fglasgow-exts -ddump-opt-cmm'
alias dghccn='$GHCDEVBIN -fnew-codegen -keep-tmp-files -fllvm -fforce-recomp -fglasgow-exts -ddump-opt-cmm'
alias dghcc1='$GHCDEV/ghc-stage1 -keep-tmp-files -fllvm -fforce-recomp -fglasgow-exts'

alias vghc='vim -p $TMPDIR/ghc*/*.ll(u{`whoami`})'

function hsclean() {
	rm -rf $TMPDIR/ghc*(u{`whoami`})
	rm $GHCHOME/*.hi
	rm $GHCHOME/*.o
	rm $GHCHOME/*(*)
}

alias dghc_config='runhaskell Setup configure --with-ghc=$GHCDEVBIN --with-ghc-pkg=$GHCDEVPKG'
alias dghc_build='runhaskell Setup build'
alias dghc_reg='runhaskell Setup register --inplace'
alias dghc_pkg='dghc_config && dghc_build && dghc_reg'

# Aptitude
alias ap='sudo aptitude'
alias api='sudo aptitude install'
alias apu='sudo aptitude update'
alias apg='sudo aptitude full-upgrade'
alias apz='sudo aptitude search'
alias apc='sudo aptitude changelog'
alias aps='sudo aptitude show'

# sync all my Settings
alias sync_all='pushd ~/Settings && gl && gp && pushd ~/Vim && gl && gp && pushd ~/Scraps && gl && gp && popd && popd && popd'

